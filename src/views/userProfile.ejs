<!DOCTYPE html>
<html lang="es">
<%- include('./partials/head',{
  title : 'Perfil'
}) %>

<body>
  <%- include('./partials/headerNavbar') %>

    <div class="container products-wrapper">
      <div class="row">
        <div class="col-12">
          <h2 class="products-title">Perfil de Usuario</h2>
        </div>
        <div class="col-12">
         
                <form action="/users/update?_method=PUT" method="POST"
                  enctype="multipart/form-data">
                  <div class="row product-detail">
                    <div class="col-12 col-md-4 d-flex flex-column align-items-center justify-content-between">
                      <img src="/images/users/<%= user.image ? user.image : 'default.png' %>" id="imagePreview" class="avatarImg" alt="imagen de perfil"
                        width="75%" style="object-fit: cover; object-position: top;">
                      <div class="form-group">
                        <label for="image" class="buy-now-button m-1">Cambiar imagen</label>
                        <input hidden type="file" class="form-input" id="image" name="image">
                      </div>
                    </div>
                    <div class="col-12 col-md-8 ">
                      <div class="row mt-2">
                        <div class="form-group col-12 col-md-6 ">
                          <label class="form-label" for="name">Nombre</label>
                          <input type="text" name="name" class="form-input" id="name"
                            value="<%= user.name %>" >
                        </div>
                        <div class="form-group col-12 col-md-6">
                          <label class="form-label"  for="surname">Apellido</label>
                          <input type="text" name="surname" class="form-input" id="surname"
                            value="<%= user.surname %>" >
                        </div>
                        <div class="form-group col-12 col-md-6">
                          <label class="form-label" for="password">Nueva contraseña</label>
                          <input type="password" name="password" class="form-input" id="password" autocomplete="off">
                        </div>
                        <div class="form-group col-12 col-md-6">
                          <label class="form-label" for="password2">Confirmar contraseña</label>
                          <input type="password" name="password2" class="form-input" id="password2" autocomplete="off">
                        </div>
                        <div class="form-group col-12  col-md-6">
                          <label class="form-label" for="address">Dirección</label>
                          <input type="text" name="address" class="form-input" id="address"
                            value="<%= user.addresses[0].address %>">
                        </div>
                        <div class="form-group col-12  col-md-6">
                          <label class="form-label" for="type">Tipo</label>
                          <select class="form-input" name="type" id="type" style="background-color: white;">
                            <% types.forEach(type => { %>
                                <option value="<%= type.id %>" <%= type.id == user.addresses[0].typeId && 'selected' %> ><%= type.name %></option>
                            <% }) %>
                          </select>
                        </div>
                        <div class="form-group col-12 col-md-6">
                          <label class="form-label" for="city">Ciudad</label>
                          <input type="text" name="city" class="form-input" id="city"
                            value="<%= user.addresses[0].city %>">
                          <select class="form-input" id="ciudadSelect" style="display: none;"></select>
                        </div>
                        <div class="form-group col-12 col-md-6">
                          <label class="form-label" for="state">Provincia</label>
                          <input type="text" name="state" class="form-input" id="state"
                            value="<%= user.addresses[0].state %>">
                          <select class="form-input" id="provinciaSelect" style="display: none;">
                          </select>
                        </div>
                      </div>
                      <div class="d-md-flex justify-content-end mt-5">
                        <button type="button" class="cancel-button m-1"><a href="/" class="text-light">Salir sin
                            guardar</a></button>
                        <button type="submit" class="buy-now-button m-1">Actualizar datos</button>
                      </div>
                    </div>
                  </div>
                </form>
               

        </div>
      </div>
  </div>

  <%- include('partials/footer') %>

</body>

</html>